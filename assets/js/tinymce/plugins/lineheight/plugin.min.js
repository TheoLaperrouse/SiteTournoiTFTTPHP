tinymce.create('tinymce.plugins.lineheight', {
	init : function(ed, url) {
		//console.log('init',url);
		values = [];
		for (var h = 70; h < 90; h += 10) { 
			values.push({text: String(h) + '%', value:  h}); // ...and add them to the menu
		};
		for (var h = 90; h < 120; h += 5) { 
			values.push({text: String(h) + '%', value:  h}); // ...and add them to the menu
		};
		for (var h = 120; h <= 200; h += 20) { 
			values.push({text: String(h) + '%', value:  h}); // ...and add them to the menu
		};
			
		ed.addButton( 'lineheight', {
			type: 'listbox',
			text: '',
			image: tinymce.baseURL + '/plugins/lineheight/line_spacing_black.png',
			icon: tinymce.baseURL + '/plugins/lineheight/line_spacing_black.png',
			onselect: function(v) {
					//console.log('lineheight', this.value());
					//console.log(ed.getContent());
					var html = ed.getContent() ;
					if (html.indexOf("myLineHeight")>0) {
						html = $(html).html() ;
					}
					html = (this.value() != 0) ? "<div id=\"myLineHeight\" style=\"line-height:"+this.value()+"%;\">" + html + "</div>" : html ;
					ed.setContent(html) ;
					//console.log(this);
					return false;
			},
			values: values,
			//value:100,
			onPostRender: function () {
				// Select the second item by default
				this.value('100');
			 }
		});
	}
});

// register our custom plugin
tinymce.PluginManager.add('lineheight', tinymce.plugins.lineheight);
